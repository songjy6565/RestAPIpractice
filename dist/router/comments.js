"use strict";module.exports=function(s,e){var t=require("express").Router();require("mysql");return t.get("/:number/comments",function(s,n,t){e.query("SELECT * FROM comment WHERE parentid=?",s.params.number,function(s,t){s?n.status(500).json({status:500,error:s,response:null}):n.status(200).json({status:200,error:null,response:t})})}),t.post("/:number/comments",function(s,r,t){e.query("INSERT INTO comment (author, content, date, parentid) VALUES (?, ?, ?, ?)",[s.body.author,s.body.content,s.body.date,s.params.number],function(n,s){n?r.status(500).json({status:500,error:n,response:null}):e.query("SELECT LAST_INSERT_ID()",function(s,t){n?r.status(500).json({status:500,error:s,response:null}):r.status(200).json({status:200,error:null,response:t})})})}),t.get("/:number/comments/:child",function(s,n,t){e.query("SELECT * FROM comment WHERE parentid=? and id=?",[s.params.number,s.params.child],function(s,t){s?n.status(500).json({status:500,error:s,response:null}):n.status(200).json({status:200,error:null,response:t})})}),t.put("/:number/comments/:child",function(n,r,s){var t={author:n.body.author,content:n.body.content,date:n.body.date};e.query("UPDATE comment SET ? WHERE parentid=? and id=?",[t,n.params.number,n.params.child],function(s,t){s?r.status(500).json({status:500,error:s,response:null}):r.status(200).json({status:200,error:null,response:n.params.child})})}),t.delete("/:number/comments/:child",function(n,r,s){e.query("DELETE FROM comment WHERE parentid=? and id =?",[n.params.number,n.params.child],function(s,t){s?r.status(500).json({status:500,error:s,response:null}):r.status(200).json({status:200,error:null,response:n.params.child})})}),t};